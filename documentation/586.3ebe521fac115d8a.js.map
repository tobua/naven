{"version":3,"file":"586.3ebe521fac115d8a.js","mappings":"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","sources":["webpack:///./node_modules/@codesandbox/nodebox/build/index.js","webpack:///./node_modules/@codesandbox/sandpack-client/dist/chunk-BYXT5FFC.mjs","webpack:///./node_modules/@codesandbox/sandpack-client/dist/clients/node/index.mjs"],"sourcesContent":["\"use strict\";\nvar __create = Object.create;\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __getProtoOf = Object.getPrototypeOf;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __commonJS = (cb, mod) => function __require() {\n  return mod || (0, cb[__getOwnPropNames(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;\n};\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(\n  isNodeMode || !mod || !mod.__esModule ? __defProp(target, \"default\", { value: mod, enumerable: true }) : target,\n  mod\n));\nvar __toCommonJS = (mod) => __copyProps(__defProp({}, \"__esModule\", { value: true }), mod);\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nvar __accessCheck = (obj, member, msg) => {\n  if (!member.has(obj))\n    throw TypeError(\"Cannot \" + msg);\n};\nvar __privateGet = (obj, member, getter) => {\n  __accessCheck(obj, member, \"read from private field\");\n  return getter ? getter.call(obj) : member.get(obj);\n};\nvar __privateAdd = (obj, member, value) => {\n  if (member.has(obj))\n    throw TypeError(\"Cannot add the same private member more than once\");\n  member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\n};\nvar __privateSet = (obj, member, value, setter) => {\n  __accessCheck(obj, member, \"write to private field\");\n  setter ? setter.call(obj, value) : member.set(obj, value);\n  return value;\n};\nvar __privateMethod = (obj, member, method) => {\n  __accessCheck(obj, member, \"access private method\");\n  return method;\n};\n\n// ../../node_modules/.pnpm/cuid@2.1.8/node_modules/cuid/lib/pad.js\nvar require_pad = __commonJS({\n  \"../../node_modules/.pnpm/cuid@2.1.8/node_modules/cuid/lib/pad.js\"(exports, module2) {\n    module2.exports = function pad(num, size) {\n      var s = \"000000000\" + num;\n      return s.substr(s.length - size);\n    };\n  }\n});\n\n// ../../node_modules/.pnpm/cuid@2.1.8/node_modules/cuid/lib/fingerprint.browser.js\nvar require_fingerprint_browser = __commonJS({\n  \"../../node_modules/.pnpm/cuid@2.1.8/node_modules/cuid/lib/fingerprint.browser.js\"(exports, module2) {\n    var pad = require_pad();\n    var env = typeof window === \"object\" ? window : self;\n    var globalCount = Object.keys(env).length;\n    var mimeTypesLength = navigator.mimeTypes ? navigator.mimeTypes.length : 0;\n    var clientId = pad((mimeTypesLength + navigator.userAgent.length).toString(36) + globalCount.toString(36), 4);\n    module2.exports = function fingerprint() {\n      return clientId;\n    };\n  }\n});\n\n// ../../node_modules/.pnpm/cuid@2.1.8/node_modules/cuid/lib/getRandomValue.browser.js\nvar require_getRandomValue_browser = __commonJS({\n  \"../../node_modules/.pnpm/cuid@2.1.8/node_modules/cuid/lib/getRandomValue.browser.js\"(exports, module2) {\n    var getRandomValue;\n    var crypto = typeof window !== \"undefined\" && (window.crypto || window.msCrypto) || typeof self !== \"undefined\" && self.crypto;\n    if (crypto) {\n      lim = Math.pow(2, 32) - 1;\n      getRandomValue = function() {\n        return Math.abs(crypto.getRandomValues(new Uint32Array(1))[0] / lim);\n      };\n    } else {\n      getRandomValue = Math.random;\n    }\n    var lim;\n    module2.exports = getRandomValue;\n  }\n});\n\n// ../../node_modules/.pnpm/cuid@2.1.8/node_modules/cuid/index.js\nvar require_cuid = __commonJS({\n  \"../../node_modules/.pnpm/cuid@2.1.8/node_modules/cuid/index.js\"(exports, module2) {\n    var fingerprint = require_fingerprint_browser();\n    var pad = require_pad();\n    var getRandomValue = require_getRandomValue_browser();\n    var c = 0;\n    var blockSize = 4;\n    var base = 36;\n    var discreteValues = Math.pow(base, blockSize);\n    function randomBlock() {\n      return pad((getRandomValue() * discreteValues << 0).toString(base), blockSize);\n    }\n    function safeCounter() {\n      c = c < discreteValues ? c : 0;\n      c++;\n      return c - 1;\n    }\n    function cuid3() {\n      var letter = \"c\", timestamp = new Date().getTime().toString(base), counter = pad(safeCounter().toString(base), blockSize), print = fingerprint(), random = randomBlock() + randomBlock();\n      return letter + timestamp + counter + print + random;\n    }\n    cuid3.slug = function slug() {\n      var date = new Date().getTime().toString(36), counter = safeCounter().toString(36).slice(-4), print = fingerprint().slice(0, 1) + fingerprint().slice(-1), random = randomBlock().slice(-2);\n      return date.slice(-2) + counter + print + random;\n    };\n    cuid3.isCuid = function isCuid(stringToCheck) {\n      if (typeof stringToCheck !== \"string\")\n        return false;\n      if (stringToCheck.startsWith(\"c\"))\n        return true;\n      return false;\n    };\n    cuid3.isSlug = function isSlug(stringToCheck) {\n      if (typeof stringToCheck !== \"string\")\n        return false;\n      var stringLength = stringToCheck.length;\n      if (stringLength >= 7 && stringLength <= 10)\n        return true;\n      return false;\n    };\n    cuid3.fingerprint = fingerprint;\n    module2.exports = cuid3;\n  }\n});\n\n// ../../node_modules/.pnpm/outvariant@1.3.0/node_modules/outvariant/lib/format.js\nvar require_format = __commonJS({\n  \"../../node_modules/.pnpm/outvariant@1.3.0/node_modules/outvariant/lib/format.js\"(exports) {\n    \"use strict\";\n    Object.defineProperty(exports, \"__esModule\", { value: true });\n    exports.format = void 0;\n    var POSITIONALS_EXP = /(%?)(%([sdjo]))/g;\n    function serializePositional(positional, flag) {\n      switch (flag) {\n        case \"s\":\n          return positional;\n        case \"d\":\n        case \"i\":\n          return Number(positional);\n        case \"j\":\n          return JSON.stringify(positional);\n        case \"o\": {\n          if (typeof positional === \"string\") {\n            return positional;\n          }\n          var json = JSON.stringify(positional);\n          if (json === \"{}\" || json === \"[]\" || /^\\[object .+?\\]$/.test(json)) {\n            return positional;\n          }\n          return json;\n        }\n      }\n    }\n    function format4(message) {\n      var positionals = [];\n      for (var _i = 1; _i < arguments.length; _i++) {\n        positionals[_i - 1] = arguments[_i];\n      }\n      if (positionals.length === 0) {\n        return message;\n      }\n      var positionalIndex = 0;\n      var formattedMessage = message.replace(POSITIONALS_EXP, function(match, isEscaped, _, flag) {\n        var positional = positionals[positionalIndex];\n        var value = serializePositional(positional, flag);\n        if (!isEscaped) {\n          positionalIndex++;\n          return value;\n        }\n        return match;\n      });\n      if (positionalIndex < positionals.length) {\n        formattedMessage += \" \" + positionals.slice(positionalIndex).join(\" \");\n      }\n      formattedMessage = formattedMessage.replace(/%{2,2}/g, \"%\");\n      return formattedMessage;\n    }\n    exports.format = format4;\n  }\n});\n\n// ../../node_modules/.pnpm/outvariant@1.3.0/node_modules/outvariant/lib/invariant.js\nvar require_invariant = __commonJS({\n  \"../../node_modules/.pnpm/outvariant@1.3.0/node_modules/outvariant/lib/invariant.js\"(exports) {\n    \"use strict\";\n    var __extends = exports && exports.__extends || function() {\n      var extendStatics = function(d, b) {\n        extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {\n          d2.__proto__ = b2;\n        } || function(d2, b2) {\n          for (var p in b2)\n            if (Object.prototype.hasOwnProperty.call(b2, p))\n              d2[p] = b2[p];\n        };\n        return extendStatics(d, b);\n      };\n      return function(d, b) {\n        if (typeof b !== \"function\" && b !== null)\n          throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() {\n          this.constructor = d;\n        }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n      };\n    }();\n    var __spreadArray = exports && exports.__spreadArray || function(to, from) {\n      for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\n        to[j] = from[i];\n      return to;\n    };\n    Object.defineProperty(exports, \"__esModule\", { value: true });\n    exports.invariant = exports.createInvariantWith = exports.InvariantError = void 0;\n    var format_1 = require_format();\n    var STACK_FRAMES_TO_IGNORE = 2;\n    function cleanErrorStack(error) {\n      if (!error.stack) {\n        return;\n      }\n      var nextStack = error.stack.split(\"\\n\");\n      nextStack.splice(1, STACK_FRAMES_TO_IGNORE);\n      error.stack = nextStack.join(\"\\n\");\n    }\n    var InvariantError = function(_super) {\n      __extends(InvariantError2, _super);\n      function InvariantError2(message) {\n        var positionals = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n          positionals[_i - 1] = arguments[_i];\n        }\n        var _this = _super.call(this, message) || this;\n        _this.message = message;\n        _this.name = \"Invariant Violation\";\n        _this.message = format_1.format.apply(void 0, __spreadArray([message], positionals));\n        cleanErrorStack(_this);\n        return _this;\n      }\n      return InvariantError2;\n    }(Error);\n    exports.InvariantError = InvariantError;\n    function createInvariantWith(ErrorConstructor) {\n      var invariant4 = function(predicate, message) {\n        var positionals = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n          positionals[_i - 2] = arguments[_i];\n        }\n        if (!predicate) {\n          var resolvedMessage = format_1.format.apply(void 0, __spreadArray([message], positionals));\n          var isConstructor = !!ErrorConstructor.prototype.name;\n          var error = isConstructor ? new ErrorConstructor(resolvedMessage) : ErrorConstructor(resolvedMessage);\n          cleanErrorStack(error);\n          throw error;\n        }\n      };\n      return invariant4;\n    }\n    exports.createInvariantWith = createInvariantWith;\n    function polymorphicInvariant(ErrorClass) {\n      var args = [];\n      for (var _i = 1; _i < arguments.length; _i++) {\n        args[_i - 1] = arguments[_i];\n      }\n      return createInvariantWith(ErrorClass).apply(void 0, args);\n    }\n    exports.invariant = createInvariantWith(InvariantError);\n    exports.invariant.as = polymorphicInvariant;\n  }\n});\n\n// ../../node_modules/.pnpm/outvariant@1.3.0/node_modules/outvariant/lib/index.js\nvar require_lib = __commonJS({\n  \"../../node_modules/.pnpm/outvariant@1.3.0/node_modules/outvariant/lib/index.js\"(exports) {\n    \"use strict\";\n    var __createBinding = exports && exports.__createBinding || (Object.create ? function(o, m, k, k2) {\n      if (k2 === void 0)\n        k2 = k;\n      Object.defineProperty(o, k2, { enumerable: true, get: function() {\n        return m[k];\n      } });\n    } : function(o, m, k, k2) {\n      if (k2 === void 0)\n        k2 = k;\n      o[k2] = m[k];\n    });\n    var __exportStar = exports && exports.__exportStar || function(m, exports2) {\n      for (var p in m)\n        if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports2, p))\n          __createBinding(exports2, m, p);\n    };\n    Object.defineProperty(exports, \"__esModule\", { value: true });\n    __exportStar(require_invariant(), exports);\n    __exportStar(require_format(), exports);\n  }\n});\n\n// ../../node_modules/.pnpm/@open-draft+deferred-promise@2.1.0/node_modules/@open-draft/deferred-promise/build/createDeferredExecutor.js\nvar require_createDeferredExecutor = __commonJS({\n  \"../../node_modules/.pnpm/@open-draft+deferred-promise@2.1.0/node_modules/@open-draft/deferred-promise/build/createDeferredExecutor.js\"(exports) {\n    \"use strict\";\n    Object.defineProperty(exports, \"__esModule\", { value: true });\n    exports.createDeferredExecutor = void 0;\n    function createDeferredExecutor() {\n      const executor = (resolve, reject) => {\n        executor.state = \"pending\";\n        executor.resolve = (data) => {\n          if (executor.state !== \"pending\") {\n            return;\n          }\n          executor.result = data;\n          const onFulfilled = (value) => {\n            executor.state = \"fulfilled\";\n            return value;\n          };\n          return resolve(data instanceof Promise ? data : Promise.resolve(data).then(onFulfilled));\n        };\n        executor.reject = (reason) => {\n          if (executor.state !== \"pending\") {\n            return;\n          }\n          queueMicrotask(() => {\n            executor.state = \"rejected\";\n          });\n          return reject(executor.rejectionReason = reason);\n        };\n      };\n      return executor;\n    }\n    exports.createDeferredExecutor = createDeferredExecutor;\n  }\n});\n\n// ../../node_modules/.pnpm/@open-draft+deferred-promise@2.1.0/node_modules/@open-draft/deferred-promise/build/DeferredPromise.js\nvar require_DeferredPromise = __commonJS({\n  \"../../node_modules/.pnpm/@open-draft+deferred-promise@2.1.0/node_modules/@open-draft/deferred-promise/build/DeferredPromise.js\"(exports) {\n    \"use strict\";\n    Object.defineProperty(exports, \"__esModule\", { value: true });\n    exports.DeferredPromise = void 0;\n    var createDeferredExecutor_1 = require_createDeferredExecutor();\n    var _executor, _decorate, decorate_fn;\n    var DeferredPromise4 = class extends Promise {\n      constructor(executor = null) {\n        const deferredExecutor = (0, createDeferredExecutor_1.createDeferredExecutor)();\n        super((originalResolve, originalReject) => {\n          deferredExecutor(originalResolve, originalReject);\n          executor?.(deferredExecutor.resolve, deferredExecutor.reject);\n        });\n        __privateAdd(this, _decorate);\n        __privateAdd(this, _executor, void 0);\n        __publicField(this, \"resolve\");\n        __publicField(this, \"reject\");\n        __privateSet(this, _executor, deferredExecutor);\n        this.resolve = __privateGet(this, _executor).resolve;\n        this.reject = __privateGet(this, _executor).reject;\n      }\n      get state() {\n        return __privateGet(this, _executor).state;\n      }\n      get rejectionReason() {\n        return __privateGet(this, _executor).rejectionReason;\n      }\n      then(onFulfilled, onRejected) {\n        return __privateMethod(this, _decorate, decorate_fn).call(this, super.then(onFulfilled, onRejected));\n      }\n      catch(onRejected) {\n        return __privateMethod(this, _decorate, decorate_fn).call(this, super.catch(onRejected));\n      }\n      finally(onfinally) {\n        return __privateMethod(this, _decorate, decorate_fn).call(this, super.finally(onfinally));\n      }\n    };\n    _executor = new WeakMap();\n    _decorate = new WeakSet();\n    decorate_fn = function(promise) {\n      return Object.defineProperties(promise, {\n        resolve: { configurable: true, value: this.resolve },\n        reject: { configurable: true, value: this.reject }\n      });\n    };\n    exports.DeferredPromise = DeferredPromise4;\n  }\n});\n\n// ../../node_modules/.pnpm/@open-draft+deferred-promise@2.1.0/node_modules/@open-draft/deferred-promise/build/index.js\nvar require_build = __commonJS({\n  \"../../node_modules/.pnpm/@open-draft+deferred-promise@2.1.0/node_modules/@open-draft/deferred-promise/build/index.js\"(exports) {\n    \"use strict\";\n    var __createBinding = exports && exports.__createBinding || (Object.create ? function(o, m, k, k2) {\n      if (k2 === void 0)\n        k2 = k;\n      var desc = Object.getOwnPropertyDescriptor(m, k);\n      if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n        desc = { enumerable: true, get: function() {\n          return m[k];\n        } };\n      }\n      Object.defineProperty(o, k2, desc);\n    } : function(o, m, k, k2) {\n      if (k2 === void 0)\n        k2 = k;\n      o[k2] = m[k];\n    });\n    var __exportStar = exports && exports.__exportStar || function(m, exports2) {\n      for (var p in m)\n        if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports2, p))\n          __createBinding(exports2, m, p);\n    };\n    Object.defineProperty(exports, \"__esModule\", { value: true });\n    __exportStar(require_createDeferredExecutor(), exports);\n    __exportStar(require_DeferredPromise(), exports);\n  }\n});\n\n// ../../node_modules/.pnpm/strict-event-emitter@0.4.3/node_modules/strict-event-emitter/lib/MemoryLeakError.js\nvar require_MemoryLeakError = __commonJS({\n  \"../../node_modules/.pnpm/strict-event-emitter@0.4.3/node_modules/strict-event-emitter/lib/MemoryLeakError.js\"(exports) {\n    \"use strict\";\n    Object.defineProperty(exports, \"__esModule\", { value: true });\n    exports.MemoryLeakError = void 0;\n    var MemoryLeakError = class extends Error {\n      constructor(emitter, type, count) {\n        super(`Possible EventEmitter memory leak detected. ${count} ${type.toString()} listeners added. Use emitter.setMaxListeners() to increase limit`);\n        __publicField(this, \"emitter\");\n        __publicField(this, \"type\");\n        __publicField(this, \"count\");\n        this.emitter = emitter;\n        this.type = type;\n        this.count = count;\n        this.name = \"MaxListenersExceededWarning\";\n      }\n    };\n    exports.MemoryLeakError = MemoryLeakError;\n  }\n});\n\n// ../../node_modules/.pnpm/strict-event-emitter@0.4.3/node_modules/strict-event-emitter/lib/Emitter.js\nvar require_Emitter = __commonJS({\n  \"../../node_modules/.pnpm/strict-event-emitter@0.4.3/node_modules/strict-event-emitter/lib/Emitter.js\"(exports) {\n    \"use strict\";\n    Object.defineProperty(exports, \"__esModule\", { value: true });\n    exports.Emitter = void 0;\n    var MemoryLeakError_1 = require_MemoryLeakError();\n    var _events, _maxListeners, _hasWarnedAboutPotentialMemortyLeak, _getListeners, getListeners_fn, _removeListener, removeListener_fn, _wrapOnceListener, wrapOnceListener_fn, _internalEmit, internalEmit_fn;\n    var _Emitter = class {\n      constructor() {\n        __privateAdd(this, _getListeners);\n        __privateAdd(this, _removeListener);\n        __privateAdd(this, _wrapOnceListener);\n        __privateAdd(this, _internalEmit);\n        __privateAdd(this, _events, void 0);\n        __privateAdd(this, _maxListeners, void 0);\n        __privateAdd(this, _hasWarnedAboutPotentialMemortyLeak, void 0);\n        __privateSet(this, _events, /* @__PURE__ */ new Map());\n        __privateSet(this, _maxListeners, _Emitter.defaultMaxListeners);\n        __privateSet(this, _hasWarnedAboutPotentialMemortyLeak, false);\n      }\n      static listenerCount(emitter, eventName) {\n        return emitter.listenerCount(eventName);\n      }\n      setMaxListeners(maxListeners) {\n        __privateSet(this, _maxListeners, maxListeners);\n        return this;\n      }\n      getMaxListeners() {\n        return __privateGet(this, _maxListeners);\n      }\n      eventNames() {\n        return Array.from(__privateGet(this, _events).keys());\n      }\n      emit(eventName, ...data) {\n        const listeners = __privateMethod(this, _getListeners, getListeners_fn).call(this, eventName);\n        listeners.forEach((listener) => {\n          listener.apply(this, data);\n        });\n        return listeners.length > 0;\n      }\n      addListener(eventName, listener) {\n        __privateMethod(this, _internalEmit, internalEmit_fn).call(this, \"newListener\", eventName, listener);\n        const nextListeners = __privateMethod(this, _getListeners, getListeners_fn).call(this, eventName).concat(listener);\n        __privateGet(this, _events).set(eventName, nextListeners);\n        if (__privateGet(this, _maxListeners) > 0 && this.listenerCount(eventName) > __privateGet(this, _maxListeners) && !__privateGet(this, _hasWarnedAboutPotentialMemortyLeak)) {\n          __privateSet(this, _hasWarnedAboutPotentialMemortyLeak, true);\n          const memoryLeakWarning = new MemoryLeakError_1.MemoryLeakError(this, eventName, this.listenerCount(eventName));\n          console.warn(memoryLeakWarning);\n        }\n        return this;\n      }\n      on(eventName, listener) {\n        return this.addListener(eventName, listener);\n      }\n      once(eventName, listener) {\n        return this.addListener(eventName, __privateMethod(this, _wrapOnceListener, wrapOnceListener_fn).call(this, eventName, listener));\n      }\n      prependListener(eventName, listener) {\n        const listeners = __privateMethod(this, _getListeners, getListeners_fn).call(this, eventName);\n        if (listeners.length > 0) {\n          const nextListeners = [listener].concat(listeners);\n          __privateGet(this, _events).set(eventName, nextListeners);\n        } else {\n          __privateGet(this, _events).set(eventName, listeners.concat(listener));\n        }\n        return this;\n      }\n      prependOnceListener(eventName, listener) {\n        return this.prependListener(eventName, __privateMethod(this, _wrapOnceListener, wrapOnceListener_fn).call(this, eventName, listener));\n      }\n      removeListener(eventName, listener) {\n        const listeners = __privateMethod(this, _getListeners, getListeners_fn).call(this, eventName);\n        if (listeners.length > 0) {\n          __privateMethod(this, _removeListener, removeListener_fn).call(this, listeners, listener);\n          __privateGet(this, _events).set(eventName, listeners);\n          __privateMethod(this, _internalEmit, internalEmit_fn).call(this, \"removeListener\", eventName, listener);\n        }\n        return this;\n      }\n      off(eventName, listener) {\n        return this.removeListener(eventName, listener);\n      }\n      removeAllListeners(eventName) {\n        if (eventName) {\n          __privateGet(this, _events).delete(eventName);\n        } else {\n          __privateGet(this, _events).clear();\n        }\n        return this;\n      }\n      listeners(eventName) {\n        return Array.from(__privateMethod(this, _getListeners, getListeners_fn).call(this, eventName));\n      }\n      listenerCount(eventName) {\n        return __privateMethod(this, _getListeners, getListeners_fn).call(this, eventName).length;\n      }\n      rawListeners(eventName) {\n        return this.listeners(eventName);\n      }\n    };\n    var Emitter2 = _Emitter;\n    _events = new WeakMap();\n    _maxListeners = new WeakMap();\n    _hasWarnedAboutPotentialMemortyLeak = new WeakMap();\n    _getListeners = new WeakSet();\n    getListeners_fn = function(eventName) {\n      return __privateGet(this, _events).get(eventName) || [];\n    };\n    _removeListener = new WeakSet();\n    removeListener_fn = function(listeners, listener) {\n      const index = listeners.indexOf(listener);\n      if (index > -1) {\n        listeners.splice(index, 1);\n      }\n      return [];\n    };\n    _wrapOnceListener = new WeakSet();\n    wrapOnceListener_fn = function(eventName, listener) {\n      const onceListener = (...data) => {\n        this.removeListener(eventName, onceListener);\n        listener.apply(this, data);\n      };\n      return onceListener;\n    };\n    _internalEmit = new WeakSet();\n    internalEmit_fn = function(internalEventName, eventName, listener) {\n      this.emit(\n        internalEventName,\n        ...[eventName, listener]\n      );\n    };\n    __publicField(Emitter2, \"defaultMaxListeners\", 10);\n    exports.Emitter = Emitter2;\n  }\n});\n\n// ../../node_modules/.pnpm/strict-event-emitter@0.4.3/node_modules/strict-event-emitter/lib/index.js\nvar require_lib2 = __commonJS({\n  \"../../node_modules/.pnpm/strict-event-emitter@0.4.3/node_modules/strict-event-emitter/lib/index.js\"(exports) {\n    \"use strict\";\n    var __createBinding = exports && exports.__createBinding || (Object.create ? function(o, m, k, k2) {\n      if (k2 === void 0)\n        k2 = k;\n      var desc = Object.getOwnPropertyDescriptor(m, k);\n      if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n        desc = { enumerable: true, get: function() {\n          return m[k];\n        } };\n      }\n      Object.defineProperty(o, k2, desc);\n    } : function(o, m, k, k2) {\n      if (k2 === void 0)\n        k2 = k;\n      o[k2] = m[k];\n    });\n    var __exportStar = exports && exports.__exportStar || function(m, exports2) {\n      for (var p in m)\n        if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports2, p))\n          __createBinding(exports2, m, p);\n    };\n    Object.defineProperty(exports, \"__esModule\", { value: true });\n    __exportStar(require_Emitter(), exports);\n    __exportStar(require_MemoryLeakError(), exports);\n  }\n});\n\n// src/index.ts\nvar src_exports = {};\n__export(src_exports, {\n  INJECT_MESSAGE_TYPE: () => INJECT_MESSAGE_TYPE,\n  MessageReceiver: () => MessageReceiver,\n  MessageSender: () => MessageSender,\n  Nodebox: () => Nodebox,\n  PREVIEW_LOADED_MESSAGE_TYPE: () => PREVIEW_LOADED_MESSAGE_TYPE,\n  createDebug: () => createDebug\n});\nmodule.exports = __toCommonJS(src_exports);\n\n// src/messages.ts\nvar import_cuid = __toESM(require_cuid());\nvar import_outvariant = __toESM(require_lib());\nvar import_deferred_promise = __toESM(require_build());\n\n// src/logger.ts\nvar FLAG = window.localStorage[\"CSB_EMULATOR_DEBUG\"];\nvar DEFAULT = \"\\x1B[0m\";\nvar GREEN = \"\\x1B[32;1m\";\nvar RED = \"\\x1B[31m\";\nvar BLUE = \"\\x1B[34m\";\nvar YELLOW = \"\\x1B[33;1m\";\nvar MAGENTA = \"\\x1B[35;1m\";\nvar CYAN = \"\\x1B[36;1m\";\nvar COLOR_SCOPE = {\n  preview: YELLOW,\n  emulator: MAGENTA,\n  runtime: CYAN,\n  bridge: BLUE,\n  \"runtime:worker\": CYAN\n};\nfunction createDebug(scope) {\n  return function debug3(message, ...data) {\n    if (FLAG === \"true\") {\n      const direction = () => {\n        if (message.includes(\"sender\"))\n          return `${GREEN}sender`;\n        if (message.includes(\"receiver\"))\n          return `${RED}receiver`;\n        return \"\";\n      };\n      const cleanMessage = message.replace(/\\[.+\\]:/, \"\");\n      console.log(`${COLOR_SCOPE[scope]}${scope}:${direction()}${DEFAULT}:${cleanMessage}`, ...data);\n    }\n  };\n}\n\n// src/messages.ts\nvar debug = createDebug(\"emulator\");\nvar MessageReceiver = class {\n  constructor() {\n    __publicField(this, \"emitter\");\n    __publicField(this, \"senderPort\", null);\n    this.emitter = new EventTarget();\n    this.waitForHandshake();\n  }\n  waitForHandshake() {\n    const handshakePromise = new import_deferred_promise.DeferredPromise();\n    const handshakeListener = (message) => {\n      const { data } = message;\n      debug(\"[message-receiver]: incoming\", message);\n      if (data.type === \"internal/handshake\") {\n        (0, import_outvariant.invariant)(\n          message.ports.length > 0,\n          \"Failed to confirm a MessageReceiver handshake: received event has no ports\"\n        );\n        this.senderPort = message.ports[0];\n        this.addMessageListener();\n        debug(\"[message-receiver]: handshake received!\", this.senderPort);\n        this.send(\"internal/handshake/done\");\n        debug(\"[message-receiver]: finish handshake\");\n      }\n    };\n    window.addEventListener(\"message\", handshakeListener);\n    handshakePromise.then(() => {\n      window.removeEventListener(\"message\", handshakeListener);\n    });\n    window.parent.postMessage({ type: \"internal/ready\" }, \"*\");\n    return handshakePromise;\n  }\n  addMessageListener() {\n    (0, import_outvariant.invariant)(\n      this.senderPort,\n      \"[MessageReceiver] Failed to add a message listener: sender port is not defined. Did you forget to await a handshake?\"\n    );\n    this.senderPort.onmessage = (evt) => {\n      const data = evt.data;\n      if (data.type == null) {\n        return;\n      }\n      this.emitter.dispatchEvent(\n        new MessageEvent(data.type, {\n          data: data.payload\n        })\n      );\n    };\n  }\n  on(event, listener, options) {\n    this.emitter.addEventListener(\n      event,\n      async (message) => {\n        if (!(message instanceof MessageEvent)) {\n          return;\n        }\n        const { operationId, payload } = message.data;\n        try {\n          const listenerPayload = await listener(payload);\n          this.send(\"internal/operation/done\", { operationId, listenerPayload });\n        } catch (error) {\n          if (error instanceof Error) {\n            this.send(\"internal/operation/failed\", { operationId, error });\n          }\n        }\n      },\n      options\n    );\n  }\n  send(event, ...data) {\n    (0, import_outvariant.invariant)(\n      this.senderPort,\n      '[MessageReceiver] Failed to send a message \"%j\": sender port is not defined. Did you forget to await a handshake?',\n      event\n    );\n    const payload = data[0] || {};\n    debug('[message-receiver]: send \"%s\"', event, payload);\n    this.senderPort.postMessage({ type: event, payload });\n  }\n};\nvar MessageSender = class {\n  constructor(target) {\n    this.target = target;\n    __publicField(this, \"emitter\");\n    __publicField(this, \"channel\");\n    __publicField(this, \"receiverPort\");\n    __publicField(this, \"receiverReadyPromise\");\n    this.emitter = new EventTarget();\n    this.channel = new MessageChannel();\n    this.receiverPort = this.channel.port1;\n    const receiverReadyPromise = new import_deferred_promise.DeferredPromise();\n    const handshakeListener = (message) => {\n      if (message.data.type === \"internal/ready\") {\n        debug(\"[message-sender]: runtime is ready\");\n        receiverReadyPromise.resolve();\n      }\n    };\n    window.addEventListener(\"message\", handshakeListener);\n    receiverReadyPromise.then(() => {\n      window.removeEventListener(\"message\", handshakeListener);\n    });\n    this.receiverReadyPromise = receiverReadyPromise;\n    this.receiverPort.onmessage = (evt) => {\n      const data = evt.data;\n      if (data.type != null) {\n        debug('[message-sender]: emitting \"%s\" event...', data.type, data.payload);\n        this.emitter.dispatchEvent(new MessageEvent(data.type, { data: data.payload }));\n      }\n    };\n  }\n  async handshake() {\n    const handshakePromise = new import_deferred_promise.DeferredPromise();\n    await this.receiverReadyPromise;\n    debug(\"[message-sender]: sending handshake\");\n    this.target.postMessage(\n      {\n        type: \"internal/handshake\"\n      },\n      \"*\",\n      [this.channel.port2]\n    );\n    this.on(\"internal/handshake/done\", () => {\n      handshakePromise.resolve();\n      clearTimeout(rejectionTimeout);\n    });\n    const rejectionTimeout = setTimeout(() => {\n      handshakePromise.reject(new Error(\"MessageSender: Handshake timeout\"));\n    }, 5e3);\n    return handshakePromise;\n  }\n  on(event, listener, options) {\n    debug('[message-sender]: add listener \"%s\"', event);\n    this.emitter.addEventListener(\n      event,\n      (message) => {\n        if (message instanceof MessageEvent) {\n          listener(message);\n        }\n      },\n      options\n    );\n  }\n  off(event, listener, options) {\n    this.emitter.removeEventListener(event, listener, options);\n  }\n  async send(event, ...data) {\n    const operationPromise = new import_deferred_promise.DeferredPromise();\n    const operationId = (0, import_cuid.default)();\n    const payload = data[0] || {};\n    debug('[message-sender]: send \"%s\" (%s)', event, operationId, payload);\n    this.receiverPort.postMessage({ type: event, payload: { operationId, payload } });\n    debug('[message-sender]: adding done listener for \"%s\" (%s)', event, operationId);\n    const handleOperationDone = (doneEvent) => {\n      const { data: data2 } = doneEvent;\n      if (data2.operationId === operationId) {\n        const listenerPayload = data2.listenerPayload || {};\n        debug('[message-sender]: resolving \"%s (%s) promise!', event, operationId);\n        operationPromise.resolve({\n          ...listenerPayload,\n          operationId: data2.operationId\n        });\n      }\n    };\n    const handleOperationFailed = (failEvent) => {\n      const { data: data2 } = failEvent;\n      if (data2.operationId === operationId) {\n        debug('[message-sender]: rejecting \"%s (%s) promise!', event, operationId);\n        operationPromise.reject(data2.error);\n      }\n    };\n    this.on(\"internal/operation/done\", handleOperationDone);\n    this.on(\"internal/operation/failed\", handleOperationFailed);\n    return operationPromise.finally(() => {\n      this.emitter.removeEventListener(\"internal/operation/done\", handleOperationDone);\n      this.emitter.removeEventListener(\"internal/operation/failed\", handleOperationFailed);\n    });\n  }\n};\n\n// src/Nodebox.ts\nvar import_outvariant5 = __toESM(require_lib());\nvar import_deferred_promise3 = __toESM(require_build());\n\n// src/modules/fs.ts\nvar import_cuid2 = __toESM(require_cuid());\nvar import_outvariant2 = __toESM(require_lib());\nvar FileSystemApi = class {\n  constructor(channel) {\n    this.channel = channel;\n  }\n  async init(files) {\n    await this.channel.send(\"fs/init\", { files });\n  }\n  async readFile(path, encoding) {\n    const response = await this.channel.send(\"fs/readFile\", { path, encoding }).catch((error) => {\n      throw new Error((0, import_outvariant2.format)('Failed to read file at path \"%s\"', path), { cause: error });\n    });\n    return response ? response.data : void 0;\n  }\n  async writeFile(path, content, encoding) {\n    await this.channel.send(\"fs/writeFile\", { path, content, encoding }).catch((error) => {\n      throw new Error((0, import_outvariant2.format)('Failed to write file at path \"%s\"', path), { cause: error });\n    });\n  }\n  async watch(includes, excludes, listener) {\n    const watcherId = (0, import_cuid2.default)();\n    await this.channel.send(\"fs/watch\", { watcherId, includes, excludes });\n    this.channel.on(\"fs/watch-event\", ({ data }) => {\n      if (data.watcherId === watcherId && listener) {\n        const evt = { ...data };\n        delete evt.watcherId;\n        listener(evt);\n      }\n    });\n    return {\n      dispose: () => this.channel.send(\"fs/unwatch\", { watcherId })\n    };\n  }\n};\n\n// src/modules/shell.ts\nvar import_outvariant3 = __toESM(require_lib());\nvar import_strict_event_emitter = __toESM(require_lib2());\nvar ShellApi = class {\n  constructor(channel) {\n    this.channel = channel;\n  }\n  create() {\n    return new ShellProcess(this.channel);\n  }\n};\nvar ShellProcess = class {\n  constructor(channel) {\n    this.channel = channel;\n    __publicField(this, \"id\");\n    __publicField(this, \"state\");\n    __publicField(this, \"stdout\");\n    __publicField(this, \"stderr\");\n    this.state = \"running\";\n    this.stdout = new import_strict_event_emitter.Emitter();\n    this.stderr = new import_strict_event_emitter.Emitter();\n    this.forwardStdEvents();\n  }\n  forwardStdEvents() {\n    this.channel.on(\"worker/tty\", (message) => {\n      const { data } = message;\n      if (data.workerId !== this.id) {\n        return;\n      }\n      switch (data.payload.type) {\n        case \"out\": {\n          this.stdout.emit(\"data\", data.payload.data);\n          break;\n        }\n        case \"err\": {\n          this.stderr.emit(\"data\", data.payload.data);\n          break;\n        }\n      }\n    });\n  }\n  async runCommand(command, args, options = {}) {\n    (0, import_outvariant3.invariant)(!this.id, 'Failed to run \"runCommand\" on a ShellProcess: there is already a process running.');\n    const shellInfo = await this.channel.send(\"shell/runCommand\", { command, args, options });\n    (0, import_outvariant3.invariant)(shellInfo, 'Failed to run \"runCommand\" on a ShellProcess: was not able to retrieve a running process.');\n    this.id = shellInfo.id;\n    this.state = \"running\";\n    return shellInfo;\n  }\n  async on(message, listener) {\n    switch (message) {\n      case \"progress\": {\n        this.channel.on(\"worker/progress\", ({ data }) => {\n          listener(data.status);\n        });\n        return;\n      }\n      case \"exit\": {\n        this.channel.on(\"worker/exit\", ({ data }) => {\n          if (data.workerId === this.id) {\n            listener(data.exitCode, data.error);\n          }\n        });\n        return;\n      }\n    }\n  }\n  async kill() {\n    (0, import_outvariant3.invariant)(\n      this.id,\n      'Failed to run \"kill\" on a ShellProcess: there is no process running. Did you forget to run it?'\n    );\n    this.state = \"idle\";\n    await this.channel.send(\"shell/exit\", { id: this.id }).catch((error) => {\n      throw new Error((0, import_outvariant3.format)('Failed to kill shell with ID \"%s\"', this.id), { cause: error });\n    });\n    this.id = void 0;\n  }\n};\n\n// src/modules/preview.ts\nvar import_outvariant4 = __toESM(require_lib());\nvar import_deferred_promise2 = __toESM(require_build());\nvar TIMEOUT = 1e4;\nvar PreviewApi = class {\n  constructor(channel) {\n    this.channel = channel;\n  }\n  async waitFor(payload, predicate, timeout = TIMEOUT) {\n    const readyPromise = new import_deferred_promise2.DeferredPromise();\n    const rejectTimeout = setTimeout(() => {\n      readyPromise.reject();\n    }, timeout);\n    const previewInformation = await this.channel.send(\"preview/get/info\", payload).catch((error) => {\n      readyPromise.reject(\n        new Error(\n          (0, import_outvariant4.format)(\n            'Failed to look up preview information for shell ID \"%s\" (port: %d)',\n            payload.sourceShellId,\n            payload.port\n          )\n        )\n      );\n    });\n    const foundPreview = previewInformation && predicate(previewInformation);\n    if (foundPreview) {\n      readyPromise.resolve({\n        url: previewInformation.url,\n        port: previewInformation.port,\n        sourceShellId: previewInformation.sourceShellId\n      });\n    }\n    this.channel.on(\"preview/port/ready\", ({ data }) => {\n      if (!foundPreview && predicate(data)) {\n        readyPromise.resolve({\n          url: data.url,\n          port: data.port,\n          sourceShellId: data.sourceShellId\n        });\n      }\n    });\n    return readyPromise.finally(() => {\n      clearTimeout(rejectTimeout);\n    });\n  }\n  async getByShellId(sourceShellId, timeout) {\n    return this.waitFor({ sourceShellId }, (data) => data.sourceShellId === sourceShellId, timeout).catch((error) => {\n      throw new Error((0, import_outvariant4.format)('Failed to get shell by ID \"%s\"', sourceShellId), { cause: error });\n    });\n  }\n  async waitForPort(port, timeout) {\n    return this.waitFor({ port }, (data) => data.port === port, timeout).catch((error) => {\n      throw new Error((0, import_outvariant4.format)(\"Failed to await port %d\", port), { cause: error });\n    });\n  }\n};\n\n// src/Nodebox.ts\nvar DEFAULT_RUNTIME_URL = \"https://nodebox-runtime.codesandbox.io\";\nvar debug2 = createDebug(\"emulator\");\nvar Nodebox = class {\n  constructor(options) {\n    this.options = options;\n    __publicField(this, \"channel\", null);\n    __publicField(this, \"isConnected\");\n    __publicField(this, \"url\");\n    __publicField(this, \"fileSystemApi\", null);\n    __publicField(this, \"shellApi\", null);\n    __publicField(this, \"previewApi\", null);\n    (0, import_outvariant5.invariant)(\n      this.options.iframe,\n      'Failed to create a Nodebox: expected \"iframe\" argument to be a reference to an <iframe> element but got %j',\n      this.options.iframe\n    );\n    this.url = this.options.runtimeUrl || DEFAULT_RUNTIME_URL;\n    this.isConnected = false;\n  }\n  async connect() {\n    const { iframe, cdnUrl } = this.options;\n    debug2(\"[message-sender]: Connecting to node emulator...\");\n    const connectionPromise = new import_deferred_promise3.DeferredPromise();\n    if (!this.url) {\n      connectionPromise.reject(\n        new Error(\"Nodebox URL is missing. Did you forget to provide it when creating this Nodebox instance?\")\n      );\n    }\n    (0, import_outvariant5.invariant)(\n      iframe.contentWindow,\n      \"Failed to create a MessageChannel with the Nodebox iframe: no content window found\"\n    );\n    this.channel = new MessageSender(iframe.contentWindow);\n    const frameLoadPromise = new import_deferred_promise3.DeferredPromise();\n    iframe.setAttribute(\"src\", this.url);\n    iframe.addEventListener(\n      \"load\",\n      () => {\n        frameLoadPromise.resolve();\n      },\n      { once: true }\n    );\n    iframe.addEventListener(\n      \"error\",\n      (event) => {\n        frameLoadPromise.reject(event.error);\n      },\n      { once: true }\n    );\n    await frameLoadPromise;\n    debug2(\"[message-sender]: IFrame loaded...\");\n    await this.channel.handshake();\n    debug2(\"[message-sender]: Handshake completed...\");\n    this.channel.send(\"connect\", {\n      cdnUrl\n    });\n    this.channel.on(\"runtime/ready\", () => {\n      connectionPromise.resolve();\n    });\n    return connectionPromise.then(() => {\n      debug2(\"[message-sender]: Connected to runtime...\");\n      this.isConnected = true;\n    });\n  }\n  get fs() {\n    (0, import_outvariant5.invariant)(\n      this.isConnected,\n      'Failed to access the File System API: consumer is not connected. Did you forget to run \"connect()\"?'\n    );\n    if (this.fileSystemApi) {\n      return this.fileSystemApi;\n    }\n    this.fileSystemApi = new FileSystemApi(this.channel);\n    return this.fileSystemApi;\n  }\n  get shell() {\n    (0, import_outvariant5.invariant)(\n      this.isConnected,\n      'Failed to access the Shell API: consumer is not connected. Did you forget to run \"connect()\"?'\n    );\n    if (this.shellApi) {\n      return this.shellApi;\n    }\n    this.shellApi = new ShellApi(this.channel);\n    return this.shellApi;\n  }\n  get preview() {\n    (0, import_outvariant5.invariant)(\n      this.isConnected,\n      'Failed to access the Preview API: consumer is not connected. Did you forget to run \"connect()\"?'\n    );\n    if (this.previewApi) {\n      return this.previewApi;\n    }\n    this.previewApi = new PreviewApi(this.channel);\n    return this.previewApi;\n  }\n};\n\n// src/runtime-protocol.types.ts\nvar INJECT_MESSAGE_TYPE = \"INJECT_AND_INVOKE\";\nvar PREVIEW_LOADED_MESSAGE_TYPE = \"PREVIEW_LOADED\";\n","// src/clients/base.ts\nimport isEqual from \"lodash.isequal\";\nvar SandpackClient = class {\n  constructor(iframeSelector, sandboxSetup, options = {}) {\n    this.options = options;\n    this.sandboxSetup = sandboxSetup;\n    this.iframeSelector = iframeSelector;\n  }\n  /**\n   * Clients handles\n   */\n  updateOptions(options) {\n    if (!isEqual(this.options, options)) {\n      this.options = options;\n      this.updateSandbox();\n    }\n  }\n  updateSandbox(_sandboxSetup = this.sandboxSetup, _isInitializationCompile) {\n    throw Error(\"Method not implemented\");\n  }\n  destroy() {\n    throw Error(\"Method not implemented\");\n  }\n  /**\n   * Bundler communication\n   */\n  dispatch(_message) {\n    throw Error(\"Method not implemented\");\n  }\n  listen(_listener) {\n    throw Error(\"Method not implemented\");\n  }\n};\n\nexport {\n  SandpackClient\n};\n//# sourceMappingURL=chunk-BYXT5FFC.mjs.map\n","import {\n  SandpackClient\n} from \"../../chunk-BYXT5FFC.mjs\";\nimport {\n  Buffer,\n  createError,\n  nullthrows\n} from \"../../chunk-TYCKDFJV.mjs\";\n\n// src/clients/node/index.ts\nimport { PREVIEW_LOADED_MESSAGE_TYPE, Nodebox } from \"@codesandbox/nodebox\";\n\n// src/clients/node/client.utils.ts\nimport { invariant } from \"outvariant\";\nvar writeBuffer = (content, encoding = \"utf8\") => {\n  if (typeof content === \"string\") {\n    return Buffer.from(content, encoding);\n  } else {\n    return content;\n  }\n};\nvar readBuffer = (content) => {\n  if (typeof content === \"string\")\n    return content;\n  return Buffer.from(content).toString(\"utf-8\");\n};\nvar fromBundlerFilesToFS = (files) => {\n  return Object.entries(files).reduce(\n    (acc, [key, value]) => {\n      acc[key] = writeBuffer(value.code);\n      return acc;\n    },\n    {}\n  );\n};\nvar findStartScriptPackageJson = (packageJson) => {\n  let scripts2 = {};\n  const possibleKeys = [\"dev\", \"start\"];\n  try {\n    scripts2 = JSON.parse(packageJson).scripts;\n  } catch (e) {\n    throw createError(\n      \"Could not parse package.json file: \" + e.message\n    );\n  }\n  invariant(\n    scripts2,\n    \"Failed to start. Please provide a `start` or `dev` script on the package.json\"\n  );\n  for (let index = 0; index < possibleKeys.length; index++) {\n    if (possibleKeys[index] in scripts2) {\n      const script = possibleKeys[index];\n      const [command, ...args] = scripts2[script].split(\" \");\n      return [command, args];\n    }\n  }\n  throw createError(\n    \"Failed to start. Please provide a `start` or `dev` script on the package.json\"\n  );\n};\nvar getMessageFromError = (error) => {\n  if (typeof error === \"string\")\n    return error;\n  if (typeof error === \"object\" && \"message\" in error) {\n    return error.message;\n  }\n  return createError(\n    \"The server could not be reached. Make sure that the node script is running and that a port has been started.\"\n  );\n};\n\n// src/clients/node/event-emitter.ts\nvar EventEmitter = class {\n  constructor() {\n    this.listeners = {};\n    this.listenersCount = 0;\n    this.channelId = Math.floor(Math.random() * 1e6);\n    this.listeners = [];\n  }\n  cleanup() {\n    this.listeners = {};\n    this.listenersCount = 0;\n  }\n  dispatch(message) {\n    Object.values(this.listeners).forEach((listener) => listener(message));\n  }\n  listener(listener) {\n    if (typeof listener !== \"function\") {\n      return () => {\n        return;\n      };\n    }\n    const listenerId = this.listenersCount;\n    this.listeners[listenerId] = listener;\n    this.listenersCount++;\n    return () => {\n      delete this.listeners[listenerId];\n    };\n  }\n};\n\n// src/clients/node/iframe.utils.ts\nasync function loadPreviewIframe(iframe, url) {\n  const { contentWindow } = iframe;\n  nullthrows(\n    contentWindow,\n    \"Failed to await preview iframe: no content window found\"\n  );\n  const TIME_OUT = 2e3;\n  const MAX_MANY_TIRES = 10;\n  let tries = 0;\n  let timeout;\n  return new Promise((resolve, reject) => {\n    const triesToSetUrl = () => {\n      var _a, _b;\n      const onLoadPage = () => {\n        clearTimeout(timeout);\n        tries = MAX_MANY_TIRES;\n        resolve();\n        iframe.removeEventListener(\"load\", onLoadPage);\n      };\n      if (tries >= MAX_MANY_TIRES) {\n        reject(createError(`Could not able to connect to preview.`));\n        return;\n      }\n      (_a = iframe.contentWindow) == null ? void 0 : _a.location.replace(\"about:blank\");\n      (_b = iframe.contentWindow) == null ? void 0 : _b.location.replace(url);\n      timeout = setTimeout(() => {\n        triesToSetUrl();\n        iframe.removeEventListener(\"load\", onLoadPage);\n      }, TIME_OUT);\n      tries = tries + 1;\n      iframe.addEventListener(\"load\", onLoadPage);\n    };\n    iframe.addEventListener(\"error\", () => reject(new Error(\"Iframe error\")));\n    iframe.addEventListener(\"abort\", () => reject(new Error(\"Aborted\")));\n    triesToSetUrl();\n  });\n}\nvar setPreviewIframeProperties = (iframe, options) => {\n  iframe.style.border = \"0\";\n  iframe.style.width = options.width || \"100%\";\n  iframe.style.height = options.height || \"100%\";\n  iframe.style.overflow = \"hidden\";\n  iframe.allow = \"cross-origin-isolated\";\n};\n\n// src/clients/node/inject-scripts/index.ts\nimport { INJECT_MESSAGE_TYPE } from \"@codesandbox/nodebox\";\n\n// src/clients/node/inject-scripts/dist/consoleHook.txt\nvar consoleHook_default = `\"use strict\";var Mr=Object.create;var K=Object.defineProperty;var Or=Object.getOwnPropertyDescriptor;var Er=Object.getOwnPropertyNames;var Ar=Object.getPrototypeOf,wr=Object.prototype.hasOwnProperty;var s=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports);var Dr=(r,e,t,n)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let i of Er(e))!wr.call(r,i)&&i!==t&&K(r,i,{get:()=>e[i],enumerable:!(n=Or(e,i))||n.enumerable});return r};var Q=(r,e,t)=>(t=r!=null?Mr(Ar(r)):{},Dr(e||!r||!r.__esModule?K(t,\"default\",{value:r,enumerable:!0}):t,r));var $=s(N=>{\"use strict\";N.__esModule=!0;var Rr=[\"log\",\"debug\",\"info\",\"warn\",\"error\",\"table\",\"clear\",\"time\",\"timeEnd\",\"count\",\"assert\",\"command\",\"result\"];N.default=Rr});var W=s(P=>{\"use strict\";P.__esModule=!0;function zr(){var r=function(){return((1+Math.random())*65536|0).toString(16).substring(1)};return r()+r()+\"-\"+r()+\"-\"+r()+\"-\"+r()+\"-\"+r()+\"-\"+Date.now()}P.default=zr});var z=s(b=>{\"use strict\";b.__esModule=!0;b.update=b.state=void 0;function Cr(r){b.state=r}b.update=Cr});var x=s(h=>{\"use strict\";var c=h&&h.__assign||function(){return c=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},c.apply(this,arguments)};h.__esModule=!0;h.initialState=void 0;h.initialState={timings:{},count:{}};var X=function(){return typeof performance!=\"undefined\"&&performance.now?performance.now():Date.now()};h.default=function(r,e){var t,n,i;switch(r===void 0&&(r=h.initialState),e.type){case\"COUNT\":{var a=r.count[e.name]||0;return c(c({},r),{count:c(c({},r.count),(t={},t[e.name]=a+1,t))})}case\"TIME_START\":return c(c({},r),{timings:c(c({},r.timings),(n={},n[e.name]={start:X()},n))});case\"TIME_END\":{var u=r.timings[e.name],f=X(),d=u.start,o=f-d;return c(c({},r),{timings:c(c({},r.timings),(i={},i[e.name]=c(c({},u),{end:f,time:o}),i))})}default:return r}}});var q=s(M=>{\"use strict\";var Ir=M&&M.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};M.__esModule=!0;var Nr=Ir(x()),rr=z();function Pr(r){rr.update(Nr.default(rr.state,r))}M.default=Pr});var V=s(p=>{\"use strict\";p.__esModule=!0;p.timeEnd=p.timeStart=p.count=void 0;function qr(r){return{type:\"COUNT\",name:r}}p.count=qr;function Vr(r){return{type:\"TIME_START\",name:r}}p.timeStart=Vr;function Ur(r){return{type:\"TIME_END\",name:r}}p.timeEnd=Ur});var nr=s(v=>{\"use strict\";var Lr=v&&v.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};v.__esModule=!0;v.stop=v.start=void 0;var C=z(),er=Lr(q()),tr=V();function Br(r){er.default(tr.timeStart(r))}v.start=Br;function Hr(r){var e=C.state===null||C.state===void 0?void 0:C.state.timings[r];if(e&&!e.end){er.default(tr.timeEnd(r));var t=C.state.timings[r].time;return{method:\"log\",data:[r+\": \"+t+\"ms\"]}}return{method:\"warn\",data:[\"Timer '\"+r+\"' does not exist\"]}}v.stop=Hr});var ir=s(T=>{\"use strict\";var jr=T&&T.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};T.__esModule=!0;T.increment=void 0;var kr=z(),Fr=jr(q()),Jr=V();function Gr(r){Fr.default(Jr.count(r));var e=kr.state.count[r];return{method:\"log\",data:[r+\": \"+e]}}T.increment=Gr});var ar=s(S=>{\"use strict\";var Yr=S&&S.__spreadArrays||function(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var a=arguments[e],u=0,f=a.length;u<f;u++,i++)n[i]=a[u];return n};S.__esModule=!0;S.test=void 0;function Zr(r){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return r?!1:(e.length===0&&e.push(\"console.assert\"),{method:\"error\",data:Yr([\"Assertion failed:\"],e)})}S.test=Zr});var sr=s(l=>{\"use strict\";var m=l&&l.__assign||function(){return m=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},m.apply(this,arguments)},Kr=l&&l.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),Qr=l&&l.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,\"default\",{enumerable:!0,value:e})}:function(r,e){r.default=e}),U=l&&l.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!==\"default\"&&Object.prototype.hasOwnProperty.call(r,t)&&Kr(e,r,t);return Qr(e,r),e},$r=l&&l.__spreadArrays||function(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var a=arguments[e],u=0,f=a.length;u<f;u++,i++)n[i]=a[u];return n},Wr=l&&l.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};l.__esModule=!0;var Xr=Wr(W()),ur=U(nr()),xr=U(ir()),or=U(ar());function re(r,e,t){var n=t||Xr.default();switch(r){case\"clear\":return{method:r,id:n};case\"count\":{var i=typeof e[0]==\"string\"?e[0]:\"default\";return i?m(m({},xr.increment(i)),{id:n}):!1}case\"time\":case\"timeEnd\":{var i=typeof e[0]==\"string\"?e[0]:\"default\";return i?r===\"time\"?(ur.start(i),!1):m(m({},ur.stop(i)),{id:n}):!1}case\"assert\":{var a=e.length!==0;if(a){var u=or.test.apply(or,$r([e[0]],e.slice(1)));if(u)return m(m({},u),{id:n})}return!1}case\"error\":{var f=e.map(function(d){try{return d.stack||d}catch(o){return d}});return{method:r,id:n,data:f}}default:return{method:r,id:n,data:e}}}l.default=re});var fr=s(L=>{\"use strict\";L.__esModule=!0;var _;(function(r){r[r.infinity=0]=\"infinity\",r[r.minusInfinity=1]=\"minusInfinity\",r[r.minusZero=2]=\"minusZero\"})(_||(_={}));function ee(r){return 1/r===-1/0}L.default={type:\"Arithmetic\",lookup:Number,shouldTransform:function(r,e){return r===\"number\"&&(e===1/0||e===-1/0||ee(e))},toSerializable:function(r){return r===1/0?_.infinity:r===-1/0?_.minusInfinity:_.minusZero},fromSerializable:function(r){return r===_.infinity?1/0:r===_.minusInfinity?-1/0:r===_.minusZero?-0:r}}});var cr=s(B=>{\"use strict\";B.__esModule=!0;B.default={type:\"Function\",lookup:Function,shouldTransform:function(r,e){return typeof e==\"function\"},toSerializable:function(r){var e=\"\";try{e=r.toString().substring(e.indexOf(\"{\")+1,e.lastIndexOf(\"}\"))}catch(t){}return{name:r.name,body:e,proto:Object.getPrototypeOf(r).constructor.name}},fromSerializable:function(r){try{var e=function(){};return typeof r.name==\"string\"&&Object.defineProperty(e,\"name\",{value:r.name,writable:!1}),typeof r.body==\"string\"&&Object.defineProperty(e,\"body\",{value:r.body,writable:!1}),typeof r.proto==\"string\"&&(e.constructor={name:r.proto}),e}catch(t){return r}}}});var dr=s(H=>{\"use strict\";H.__esModule=!0;var lr;function te(){return lr||(lr=document.implementation.createHTMLDocument(\"sandbox\"))}function ne(r){for(var e={},t=0,n=r.attributes;t<n.length;t++){var i=n[t];e[i.name]=i.value}return e}H.default={type:\"HTMLElement\",shouldTransform:function(r,e){return e&&e.children&&typeof e.innerHTML==\"string\"&&typeof e.tagName==\"string\"},toSerializable:function(r){return{tagName:r.tagName.toLowerCase(),attributes:ne(r),innerHTML:r.innerHTML}},fromSerializable:function(r){try{var e=te().createElement(r.tagName);e.innerHTML=r.innerHTML;for(var t=0,n=Object.keys(r.attributes);t<n.length;t++){var i=n[t];try{e.setAttribute(i,r.attributes[i])}catch(a){}}return e}catch(a){return r}}}});var hr=s(O=>{\"use strict\";var j=O&&O.__assign||function(){return j=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},j.apply(this,arguments)};O.__esModule=!0;O.default={type:\"Map\",shouldTransform:function(r,e){return e&&e.constructor&&e.constructor.name===\"Map\"},toSerializable:function(r){var e={};return r.forEach(function(t,n){var i=typeof n==\"object\"?JSON.stringify(n):n;e[i]=t}),{name:\"Map\",body:e,proto:Object.getPrototypeOf(r).constructor.name}},fromSerializable:function(r){var e=r.body,t=j({},e);return typeof r.proto==\"string\"&&(t.constructor={name:r.proto}),t}}});var _r=s(J=>{\"use strict\";J.__esModule=!0;var F=\"@t\",vr=\"@r\",mr=/^#*@(t|r)$/,E=function(){var e=eval;return e(\"this\")}(),I=typeof ArrayBuffer==\"function\",A=typeof Map==\"function\",k=typeof Set==\"function\",ie=[\"Int8Array\",\"Uint8Array\",\"Uint8ClampedArray\",\"Int16Array\",\"Uint16Array\",\"Int32Array\",\"Uint32Array\",\"Float32Array\",\"Float64Array\"],pr=Array.prototype.slice,ae={serialize:function(r){return JSON.stringify(r)},deserialize:function(r){return JSON.parse(r)}},ue=function(){function r(e,t){this.references=e,this.transforms=t,this.transformsMap=this._makeTransformsMap(),this.circularCandidates=[],this.circularCandidatesDescrs=[],this.circularRefCount=0}return r._createRefMark=function(e){var t=Object.create(null);return t[vr]=e,t},r.prototype._createCircularCandidate=function(e,t,n){this.circularCandidates.push(e),this.circularCandidatesDescrs.push({parent:t,key:n,refIdx:-1})},r.prototype._applyTransform=function(e,t,n,i){var a=Object.create(null),u=i.toSerializable(e);return typeof u==\"object\"&&this._createCircularCandidate(e,t,n),a[F]=i.type,a.data=this._handleValue(function(){return u},t,n),a},r.prototype._handleArray=function(e){for(var t=[],n=function(u){t[u]=i._handleValue(function(){return e[u]},t,u)},i=this,a=0;a<e.length;a++)n(a);return t},r.prototype._handlePlainObject=function(e){var t,n,i=Object.create(null),a=function(o){if(Reflect.has(e,o)){var g=mr.test(o)?\"#\"+o:o;i[g]=u._handleValue(function(){return e[o]},i,g)}},u=this;for(var f in e)a(f);var d=(n=(t=e==null?void 0:e.__proto__)===null||t===void 0?void 0:t.constructor)===null||n===void 0?void 0:n.name;return d&&d!==\"Object\"&&(i.constructor={name:d}),i},r.prototype._handleObject=function(e,t,n){return this._createCircularCandidate(e,t,n),Array.isArray(e)?this._handleArray(e):this._handlePlainObject(e)},r.prototype._ensureCircularReference=function(e){var t=this.circularCandidates.indexOf(e);if(t>-1){var n=this.circularCandidatesDescrs[t];return n.refIdx===-1&&(n.refIdx=n.parent?++this.circularRefCount:0),r._createRefMark(n.refIdx)}return null},r.prototype._handleValue=function(e,t,n){try{var i=e(),a=typeof i,u=a===\"object\"&&i!==null;if(u){var f=this._ensureCircularReference(i);if(f)return f}var d=this._findTransform(a,i);return d?this._applyTransform(i,t,n,d):u?this._handleObject(i,t,n):i}catch(o){try{return this._handleValue(function(){return o instanceof Error?o:new Error(o)},t,n)}catch(g){return null}}},r.prototype._makeTransformsMap=function(){if(A){var e=new Map;return this.transforms.forEach(function(t){t.lookup&&e.set(t.lookup,t)}),e}},r.prototype._findTransform=function(e,t){if(A&&t&&t.constructor){var n=this.transformsMap.get(t.constructor);if(n!=null&&n.shouldTransform(e,t))return n}for(var i=0,a=this.transforms;i<a.length;i++){var n=a[i];if(n.shouldTransform(e,t))return n}},r.prototype.transform=function(){for(var e=this,t=[this._handleValue(function(){return e.references},null,null)],n=0,i=this.circularCandidatesDescrs;n<i.length;n++){var a=i[n];a.refIdx>0&&(t[a.refIdx]=a.parent[a.key],a.parent[a.key]=r._createRefMark(a.refIdx))}return t},r}(),oe=function(){function r(e,t){this.activeTransformsStack=[],this.visitedRefs=Object.create(null),this.references=e,this.transformMap=t}return r.prototype._handlePlainObject=function(e){var t=Object.create(null);\"constructor\"in e&&(!e.constructor||typeof e.constructor.name!=\"string\")&&(e.constructor={name:\"Object\"});for(var n in e)e.hasOwnProperty(n)&&(this._handleValue(e[n],e,n),mr.test(n)&&(t[n.substring(1)]=e[n],delete e[n]));for(var i in t)e[i]=t[i]},r.prototype._handleTransformedObject=function(e,t,n){var i=e[F],a=this.transformMap[i];if(!a)throw new Error(\\`Can't find transform for \"\\`+i+'\" type.');this.activeTransformsStack.push(e),this._handleValue(e.data,e,\"data\"),this.activeTransformsStack.pop(),t[n]=a.fromSerializable(e.data)},r.prototype._handleCircularSelfRefDuringTransform=function(e,t,n){var i=this.references;Object.defineProperty(t,n,{val:void 0,configurable:!0,enumerable:!0,get:function(){return this.val===void 0&&(this.val=i[e]),this.val},set:function(a){this.val=a}})},r.prototype._handleCircularRef=function(e,t,n){this.activeTransformsStack.includes(this.references[e])?this._handleCircularSelfRefDuringTransform(e,t,n):(this.visitedRefs[e]||(this.visitedRefs[e]=!0,this._handleValue(this.references[e],this.references,e)),t[n]=this.references[e])},r.prototype._handleValue=function(e,t,n){if(!(typeof e!=\"object\"||e===null)){var i=e[vr];if(i!==void 0)this._handleCircularRef(i,t,n);else if(e[F])this._handleTransformedObject(e,t,n);else if(Array.isArray(e))for(var a=0;a<e.length;a++)this._handleValue(e[a],e,a);else this._handlePlainObject(e)}},r.prototype.transform=function(){return this.visitedRefs[0]=!0,this._handleValue(this.references[0],this.references,0),this.references[0]},r}(),se=[{type:\"[[NaN]]\",shouldTransform:function(r,e){return r===\"number\"&&isNaN(e)},toSerializable:function(){return\"\"},fromSerializable:function(){return NaN}},{type:\"[[undefined]]\",shouldTransform:function(r){return r===\"undefined\"},toSerializable:function(){return\"\"},fromSerializable:function(){}},{type:\"[[Date]]\",lookup:Date,shouldTransform:function(r,e){return e instanceof Date},toSerializable:function(r){return r.getTime()},fromSerializable:function(r){var e=new Date;return e.setTime(r),e}},{type:\"[[RegExp]]\",lookup:RegExp,shouldTransform:function(r,e){return e instanceof RegExp},toSerializable:function(r){var e={src:r.source,flags:\"\"};return r.global&&(e.flags+=\"g\"),r.ignoreCase&&(e.flags+=\"i\"),r.multiline&&(e.flags+=\"m\"),e},fromSerializable:function(r){return new RegExp(r.src,r.flags)}},{type:\"[[Error]]\",lookup:Error,shouldTransform:function(r,e){return e instanceof Error},toSerializable:function(r){var e,t;return r.stack||(t=(e=Error).captureStackTrace)===null||t===void 0||t.call(e,r),{name:r.name,message:r.message,stack:r.stack}},fromSerializable:function(r){var e=E[r.name]||Error,t=new e(r.message);return t.stack=r.stack,t}},{type:\"[[ArrayBuffer]]\",lookup:I&&ArrayBuffer,shouldTransform:function(r,e){return I&&e instanceof ArrayBuffer},toSerializable:function(r){var e=new Int8Array(r);return pr.call(e)},fromSerializable:function(r){if(I){var e=new ArrayBuffer(r.length),t=new Int8Array(e);return t.set(r),e}return r}},{type:\"[[TypedArray]]\",shouldTransform:function(r,e){if(I)return ArrayBuffer.isView(e)&&!(e instanceof DataView);for(var t=0,n=ie;t<n.length;t++){var i=n[t];if(typeof E[i]==\"function\"&&e instanceof E[i])return!0}return!1},toSerializable:function(r){return{ctorName:r.constructor.name,arr:pr.call(r)}},fromSerializable:function(r){return typeof E[r.ctorName]==\"function\"?new E[r.ctorName](r.arr):r.arr}},{type:\"[[Map]]\",lookup:A&&Map,shouldTransform:function(r,e){return A&&e instanceof Map},toSerializable:function(r){var e=[];return r.forEach(function(t,n){e.push(n),e.push(t)}),e},fromSerializable:function(r){if(A){for(var e=new Map,t=0;t<r.length;t+=2)e.set(r[t],r[t+1]);return e}for(var n=[],i=0;i<r.length;i+=2)n.push([r[t],r[t+1]]);return n}},{type:\"[[Set]]\",lookup:k&&Set,shouldTransform:function(r,e){return k&&e instanceof Set},toSerializable:function(r){var e=[];return r.forEach(function(t){e.push(t)}),e},fromSerializable:function(r){if(k){for(var e=new Set,t=0;t<r.length;t++)e.add(r[t]);return e}return r}}],fe=function(){function r(e){this.transforms=[],this.transformsMap=Object.create(null),this.serializer=e||ae,this.addTransforms(se)}return r.prototype.addTransforms=function(e){e=Array.isArray(e)?e:[e];for(var t=0,n=e;t<n.length;t++){var i=n[t];if(this.transformsMap[i.type])throw new Error('Transform with type \"'+i.type+'\" was already added.');this.transforms.push(i),this.transformsMap[i.type]=i}return this},r.prototype.removeTransforms=function(e){e=Array.isArray(e)?e:[e];for(var t=0,n=e;t<n.length;t++){var i=n[t],a=this.transforms.indexOf(i);a>-1&&this.transforms.splice(a,1),delete this.transformsMap[i.type]}return this},r.prototype.encode=function(e){var t=new ue(e,this.transforms),n=t.transform();return this.serializer.serialize(n)},r.prototype.decode=function(e){var t=this.serializer.deserialize(e),n=new oe(t,this.transformsMap);return n.transform()},r}();J.default=fe});var Y=s(y=>{\"use strict\";var w=y&&y.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};y.__esModule=!0;y.Decode=y.Encode=void 0;var ce=w(fr()),le=w(cr()),de=w(dr()),he=w(hr()),pe=w(_r()),ve=[de.default,le.default,ce.default,he.default],G=new pe.default;G.addTransforms(ve);function me(r){return JSON.parse(G.encode(r))}y.Encode=me;function _e(r){return G.decode(JSON.stringify(r))}y.Decode=_e});var gr=s(D=>{\"use strict\";var yr=D&&D.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};D.__esModule=!0;var ye=yr($()),ge=yr(sr()),be=Y();function Te(r,e,t){t===void 0&&(t=!0);for(var n=r,i={pointers:{},src:{npm:\"https://npmjs.com/package/console-feed\",github:\"https://github.com/samdenty99/console-feed\"}},a=function(o){var g=n[o];n[o]=function(){g.apply(this,arguments);var Sr=[].slice.call(arguments);setTimeout(function(){var R=ge.default(o,Sr);if(R){var Z=R;t&&(Z=be.Encode(R)),e(Z,R)}})},i.pointers[o]=g},u=0,f=ye.default;u<f.length;u++){var d=f[u];a(d)}return n.feed=i,n}D.default=Te});var br=Q(gr()),Tr=Q(Y());(0,br.default)(window.console,r=>{parent.postMessage({type:\"console\",codesandbox:!0,log:(0,Tr.Decode)(r)},\"*\")});\n`;\n\n// src/clients/node/inject-scripts/historyListener.ts\nfunction setupHistoryListeners() {\n  const origHistoryProto = window.history.__proto__;\n  const historyList = [];\n  let historyPosition = 0;\n  const dispatchMessage = (url) => {\n    parent.postMessage(\n      {\n        type: \"urlchange\",\n        url,\n        back: historyPosition > 0,\n        forward: historyPosition < historyList.length - 1\n      },\n      \"*\"\n    );\n  };\n  function pushHistory(url, state) {\n    historyList.splice(historyPosition + 1);\n    historyList.push({ url, state });\n    historyPosition = historyList.length - 1;\n  }\n  Object.assign(window.history, {\n    go(delta) {\n      const newPos = historyPosition + delta;\n      if (newPos >= 0 && newPos <= historyList.length - 1) {\n        historyPosition = newPos;\n        const { url, state } = historyList[historyPosition];\n        origHistoryProto.replaceState.call(window.history, state, \"\", url);\n        const newURL = document.location.href;\n        dispatchMessage(newURL);\n        window.dispatchEvent(new PopStateEvent(\"popstate\", { state }));\n      }\n    },\n    back() {\n      window.history.go(-1);\n    },\n    forward() {\n      window.history.go(1);\n    },\n    pushState(state, title, url) {\n      origHistoryProto.replaceState.call(window.history, state, title, url);\n      pushHistory(url, state);\n      dispatchMessage(document.location.href);\n    },\n    replaceState(state, title, url) {\n      origHistoryProto.replaceState.call(window.history, state, title, url);\n      historyList[historyPosition] = { state, url };\n      dispatchMessage(document.location.href);\n    }\n  });\n  function handleMessage({ data }) {\n    if (data.type === \"urlback\") {\n      history.back();\n    } else if (data.type === \"urlforward\") {\n      history.forward();\n    } else if (data.type === \"refresh\") {\n      document.location.reload();\n    }\n  }\n  window.addEventListener(\"message\", handleMessage);\n}\n\n// src/clients/node/inject-scripts/index.ts\nvar scripts = [\n  { code: setupHistoryListeners.toString(), id: \"historyListener\" },\n  {\n    code: \"function consoleHook() {\" + consoleHook_default + \"\\n};\",\n    id: \"consoleHook\"\n  }\n];\nvar injectScriptToIframe = (iframe) => {\n  scripts.forEach(({ code, id }) => {\n    var _a;\n    const message = {\n      uid: id,\n      type: INJECT_MESSAGE_TYPE,\n      code: `exports.activate = ${code}`,\n      scope: {}\n    };\n    (_a = iframe.contentWindow) == null ? void 0 : _a.postMessage(message, \"*\");\n  });\n};\n\n// src/clients/node/index.ts\nvar SandpackNode = class extends SandpackClient {\n  constructor(selector, sandboxInfo, options = {}) {\n    super(selector, sandboxInfo, {\n      ...options,\n      bundlerURL: options.bundlerURL\n    });\n    this._modulesCache = /* @__PURE__ */ new Map();\n    this.emitter = new EventEmitter();\n    this.manageIframes(selector);\n    this.createNodebox();\n  }\n  createNodebox() {\n    this.emulator = new Nodebox({\n      iframe: this.emulatorIframe,\n      runtimeUrl: this.options.bundlerURL\n    });\n  }\n  /**\n   * It initializes the emulator and provide it with files, template and script to run\n   */\n  async compile(files) {\n    try {\n      this.dispatch({ type: \"start\", firstLoad: true });\n      await this.emulator.connect();\n      await this.emulator.fs.init(files);\n      await this.globalListeners();\n      const { id: shellId } = await this.createShellProcessFromTask(files);\n      await this.createPreviewURLFromId(shellId);\n      await this.setLocationURLIntoIFrame();\n      this.dispatchDoneMessage();\n    } catch (err) {\n      this.dispatch({\n        type: \"action\",\n        action: \"notification\",\n        notificationType: \"error\",\n        title: getMessageFromError(err)\n      });\n      this.dispatch({ type: \"done\", compilatonError: true });\n    }\n  }\n  /**\n   * It creates a new shell and run the starting task\n   */\n  async createShellProcessFromTask(files) {\n    const packageJsonContent = readBuffer(files[\"/package.json\"]);\n    this.emulatorCommand = findStartScriptPackageJson(packageJsonContent);\n    this.emulatorShellProcess = this.emulator.shell.create();\n    await this.emulatorShellProcess.on(\"exit\", (exitCode) => {\n      this.dispatch({\n        type: \"action\",\n        action: \"notification\",\n        notificationType: \"error\",\n        title: createError(`Error: process.exit(${exitCode}) called.`)\n      });\n    });\n    await this.emulatorShellProcess.on(\"progress\", (data) => {\n      var _a;\n      if (data.state === \"command_running\" || data.state === \"starting_command\") {\n        this.dispatch({\n          type: \"shell/progress\",\n          data: {\n            ...data,\n            command: (_a = this.emulatorCommand) == null ? void 0 : _a.map((e) => Array.isArray(e) ? e.join(\" \") : e).join(\" \")\n          }\n        });\n        return;\n      }\n      this.dispatch({ type: \"shell/progress\", data });\n    });\n    this.emulatorShellProcess.stdout.on(\"data\", (data) => {\n      this.dispatch({ type: \"stdout\", payload: { data, type: \"out\" } });\n    });\n    this.emulatorShellProcess.stderr.on(\"data\", (data) => {\n      this.dispatch({ type: \"stdout\", payload: { data, type: \"err\" } });\n    });\n    return await this.emulatorShellProcess.runCommand(...this.emulatorCommand);\n  }\n  async createPreviewURLFromId(id) {\n    try {\n      this.iframePreviewUrl = void 0;\n      const { url } = await this.emulator.preview.getByShellId(id);\n      this.iframePreviewUrl = url;\n    } catch {\n    }\n  }\n  /**\n   * Nodebox needs to handle two types of iframes at the same time:\n   *\n   * 1. Runtime iframe: where the emulator process runs, which is responsible\n   *    for creating the other iframes (hidden);\n   * 2. Preview iframes: any other node process that contains a PORT (public);\n   */\n  manageIframes(selector) {\n    var _a;\n    if (typeof selector === \"string\") {\n      const element = document.querySelector(selector);\n      nullthrows(element, `The element '${selector}' was not found`);\n      this.iframe = document.createElement(\"iframe\");\n    } else {\n      this.iframe = selector;\n    }\n    setPreviewIframeProperties(this.iframe, this.options);\n    nullthrows(\n      this.iframe.parentNode,\n      `The given iframe does not have a parent.`\n    );\n    this.emulatorIframe = document.createElement(\"iframe\");\n    this.emulatorIframe.classList.add(\"sp-bridge-frame\");\n    (_a = this.iframe.parentNode) == null ? void 0 : _a.appendChild(this.emulatorIframe);\n  }\n  async setLocationURLIntoIFrame() {\n    if (this.iframePreviewUrl) {\n      await loadPreviewIframe(this.iframe, this.iframePreviewUrl);\n    }\n  }\n  /**\n   * Send all messages and events to tell to the\n   * consumer that the bundler is ready without any error\n   */\n  dispatchDoneMessage() {\n    this.dispatch({ type: \"done\", compilatonError: false });\n    if (this.iframePreviewUrl) {\n      this.dispatch({\n        type: \"urlchange\",\n        url: this.iframePreviewUrl,\n        back: false,\n        forward: false\n      });\n    }\n  }\n  async globalListeners() {\n    window.addEventListener(\"message\", (event) => {\n      if (event.data.type === PREVIEW_LOADED_MESSAGE_TYPE) {\n        injectScriptToIframe(this.iframe);\n      }\n      if (event.data.type === \"urlchange\") {\n        this.dispatch({\n          type: \"urlchange\",\n          url: event.data.url,\n          back: event.data.back,\n          forward: event.data.forward\n        });\n      }\n      this.dispatch(event.data);\n    });\n    await this.emulator.fs.watch(\n      [\"*\"],\n      [\n        \".next\",\n        \"node_modules\",\n        \"build\",\n        \"dist\",\n        \"vendor\",\n        \".config\",\n        \".vuepress\"\n      ],\n      async (message) => {\n        if (!message)\n          return;\n        const event = message;\n        try {\n          switch (event.type) {\n            case \"change\":\n            case \"create\": {\n              const content = await this.emulator.fs.readFile(\n                event.path,\n                \"utf8\"\n              );\n              this.dispatch({\n                type: \"fs/change\",\n                path: event.path,\n                content\n              });\n              this._modulesCache.set(event.path, writeBuffer(content));\n              break;\n            }\n            case \"remove\":\n              this.dispatch({\n                type: \"fs/remove\",\n                path: event.path\n              });\n              this._modulesCache.delete(event.path);\n              break;\n            case \"rename\": {\n              this.dispatch({\n                type: \"fs/remove\",\n                path: event.oldPath\n              });\n              this._modulesCache.delete(event.oldPath);\n              const newContent = await this.emulator.fs.readFile(\n                event.newPath,\n                \"utf8\"\n              );\n              this.dispatch({\n                type: \"fs/change\",\n                path: event.newPath,\n                content: newContent\n              });\n              this._modulesCache.set(event.newPath, writeBuffer(newContent));\n              break;\n            }\n            case \"close\":\n              break;\n          }\n        } catch (err) {\n          this.dispatch({\n            type: \"action\",\n            action: \"notification\",\n            notificationType: \"error\",\n            title: getMessageFromError(err)\n          });\n        }\n      }\n    );\n  }\n  /**\n   * PUBLIC Methods\n   */\n  async restartShellProcess() {\n    var _a, _b;\n    if (this.emulatorShellProcess && this.emulatorCommand) {\n      this.dispatch({ type: \"start\", firstLoad: true });\n      await this.emulatorShellProcess.kill();\n      (_b = (_a = this.iframe) == null ? void 0 : _a.contentWindow) == null ? void 0 : _b.location.replace(\"about:blank\");\n      this.createNodebox();\n      await this.compile(Object.fromEntries(this._modulesCache));\n    }\n  }\n  updateSandbox(setup) {\n    var _a;\n    const modules = fromBundlerFilesToFS(setup.files);\n    if (((_a = this.emulatorShellProcess) == null ? void 0 : _a.state) === \"running\") {\n      Object.entries(modules).forEach(([key, value]) => {\n        if (Buffer.compare(value, this._modulesCache.get(key)) !== 0) {\n          this.emulator.fs.writeFile(key, value);\n        }\n      });\n      return;\n    }\n    this.dispatch({\n      codesandbox: true,\n      modules,\n      template: setup.template,\n      type: \"compile\"\n    });\n    Object.entries(modules).forEach(([key, value]) => {\n      this._modulesCache.set(key, writeBuffer(value));\n    });\n  }\n  async dispatch(message) {\n    var _a, _b;\n    switch (message.type) {\n      case \"compile\":\n        this.compile(message.modules);\n        break;\n      case \"refresh\":\n        await this.setLocationURLIntoIFrame();\n        break;\n      case \"urlback\":\n      case \"urlforward\":\n        (_b = (_a = this.iframe) == null ? void 0 : _a.contentWindow) == null ? void 0 : _b.postMessage(message, \"*\");\n        break;\n      case \"shell/restart\":\n        this.restartShellProcess();\n        break;\n      case \"shell/openPreview\":\n        window.open(this.iframePreviewUrl, \"_blank\");\n        break;\n      default:\n        this.emitter.dispatch(message);\n    }\n  }\n  listen(listener) {\n    return this.emitter.listener(listener);\n  }\n  destroy() {\n    this.emitter.cleanup();\n  }\n};\nexport {\n  SandpackNode\n};\n//# sourceMappingURL=index.mjs.map\n"],"names":["mod","__create","Object","create","__defProp","defineProperty","__getOwnPropDesc","getOwnPropertyDescriptor","__getOwnPropNames","getOwnPropertyNames","__getProtoOf","getPrototypeOf","__hasOwnProp","prototype","hasOwnProperty","__commonJS","cb","exports","__copyProps","to","from","except","desc","key","call","get","enumerable","__toESM","isNodeMode","target","__esModule","value","__publicField","obj","configurable","writable","__defNormalProp","__accessCheck","member","msg","has","TypeError","__privateGet","getter","__privateAdd","WeakSet","add","set","__privateSet","setter","__privateMethod","method","require_pad","module2","num","size","s","substr","length","require_fingerprint_browser","pad","env","window","self","globalCount","keys","clientId","navigator","mimeTypes","userAgent","toString","require_getRandomValue_browser","getRandomValue","lim","crypto","msCrypto","Math","pow","abs","getRandomValues","Uint32Array","random","require_cuid","fingerprint","c","blockSize","base","discreteValues","randomBlock","safeCounter","cuid3","Date","getTime","slug","date","counter","slice","print","isCuid","stringToCheck","startsWith","isSlug","stringLength","require_format","format","POSITIONALS_EXP","message","positionals","_i","arguments","positionalIndex","formattedMessage","replace","match","isEscaped","_","flag","positional","Number","JSON","stringify","json","test","serializePositional","join","require_invariant","extendStatics","__extends","d","b","setPrototypeOf","__proto__","Array","d2","b2","p","String","__","this","constructor","__spreadArray","i","il","j","invariant","createInvariantWith","InvariantError","format_1","STACK_FRAMES_TO_IGNORE","cleanErrorStack","error","stack","nextStack","split","splice","_super","InvariantError2","_this","name","apply","Error","ErrorConstructor","predicate","resolvedMessage","as","ErrorClass","args","require_lib","__createBinding","o","m","k","k2","__exportStar","exports2","require_createDeferredExecutor","createDeferredExecutor","executor","resolve","reject","state","data","result","Promise","then","reason","queueMicrotask","rejectionReason","require_DeferredPromise","DeferredPromise","_executor","_decorate","decorate_fn","createDeferredExecutor_1","WeakMap","promise","defineProperties","deferredExecutor","super","originalResolve","originalReject","onFulfilled","onRejected","catch","finally","onfinally","require_build","require_MemoryLeakError","MemoryLeakError","emitter","type","count","require_Emitter","Emitter","_events","_maxListeners","_hasWarnedAboutPotentialMemortyLeak","_getListeners","getListeners_fn","_removeListener","removeListener_fn","_wrapOnceListener","wrapOnceListener_fn","_internalEmit","internalEmit_fn","MemoryLeakError_1","_Emitter","Map","defaultMaxListeners","static","eventName","listenerCount","setMaxListeners","maxListeners","getMaxListeners","eventNames","emit","listeners","forEach","listener","addListener","nextListeners","concat","memoryLeakWarning","console","warn","on","once","prependListener","prependOnceListener","removeListener","off","removeAllListeners","delete","clear","rawListeners","Emitter2","index","indexOf","onceListener","internalEventName","require_lib2","src_exports","all","__export","INJECT_MESSAGE_TYPE","MessageReceiver","MessageSender","Nodebox","PREVIEW_LOADED_MESSAGE_TYPE","createDebug","module","import_cuid","import_outvariant","import_deferred_promise","FLAG","localStorage","DEFAULT","GREEN","RED","CYAN","COLOR_SCOPE","preview","emulator","runtime","bridge","scope","direction","includes","cleanMessage","log","debug","EventTarget","waitForHandshake","handshakePromise","handshakeListener","ports","senderPort","addMessageListener","send","addEventListener","removeEventListener","parent","postMessage","onmessage","evt","dispatchEvent","MessageEvent","payload","event","options","async","operationId","listenerPayload","channel","MessageChannel","receiverPort","port1","receiverReadyPromise","port2","clearTimeout","rejectionTimeout","setTimeout","operationPromise","default","handleOperationDone","doneEvent","data2","handleOperationFailed","failEvent","import_outvariant5","import_deferred_promise3","import_cuid2","import_outvariant2","import_outvariant3","import_strict_event_emitter","import_outvariant4","import_deferred_promise2","debug2","iframe","url","runtimeUrl","isConnected","cdnUrl","connectionPromise","contentWindow","frameLoadPromise","setAttribute","handshake","fs","fileSystemApi","files","path","encoding","response","cause","content","excludes","watcherId","dispose","shell","shellApi","stdout","stderr","forwardStdEvents","workerId","id","command","shellInfo","status","exitCode","previewApi","timeout","readyPromise","rejectTimeout","previewInformation","sourceShellId","port","foundPreview","waitFor","SandpackClient","iframeSelector","sandboxSetup","updateOptions","updateSandbox","_sandboxSetup","_isInitializationCompile","destroy","dispatch","_message","listen","_listener","writeBuffer","getMessageFromError","scripts","code","origHistoryProto","history","historyList","historyPosition","dispatchMessage","back","forward","assign","go","delta","newPos","replaceState","newURL","document","location","href","PopStateEvent","pushState","title","push","pushHistory","reload","SandpackNode","selector","sandboxInfo","bundlerURL","_modulesCache","listenersCount","channelId","floor","cleanup","values","listenerId","manageIframes","createNodebox","emulatorIframe","firstLoad","connect","init","globalListeners","shellId","createShellProcessFromTask","createPreviewURLFromId","setLocationURLIntoIFrame","dispatchDoneMessage","err","action","notificationType","compilatonError","packageJsonContent","emulatorCommand","packageJson","scripts2","possibleKeys","parse","e","script","findStartScriptPackageJson","emulatorShellProcess","_a","map","isArray","runCommand","iframePreviewUrl","getByShellId","element","querySelector","createElement","style","border","width","height","overflow","allow","parentNode","classList","appendChild","tries","triesToSetUrl","_b","onLoadPage","loadPreviewIframe","uid","watch","readFile","oldPath","newContent","newPath","kill","compile","fromEntries","setup","modules","entries","reduce","acc","codesandbox","template","writeFile","restartShellProcess","open"],"sourceRoot":""}